<apex:page docType="html-5.0" showHeader="false" standardStylesheets="false" standardController="genesis__Applications__c" extensions="genesis.TransactionRoomPageCtrl,genesis.TransactionRoomRemoteAction">
    <html lang="en">

    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Deal Room for {!application.Name}</title>
        <meta name="generator" content="Bootply" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <apex:stylesheet value="{!URLFOR($Resource.genesis__Angular, '/Angular/css/cloriginate-bootstrap.css')}" />
        <apex:stylesheet value="{!URLFOR($Resource.genesis__Angular, '/Angular/css/bootstrap.css')}" /> 
        <apex:stylesheet value="{!URLFOR($Resource.genesis__Angular, '/Angular/css/cloriginate-sb-admin-2.css')}" />
        <apex:stylesheet value="{!URLFOR($Resource.genesis__Angular, '/Angular/font-awesome/css/font-awesome.min.css')}" />
        <apex:stylesheet value="{!URLFOR($Resource.genesis__Angular, '/Angular/css/perfect-scrollbar.min.css')}" />
        <apex:stylesheet value="{!URLFOR($Resource.genesis__Angular, '/Angular/css/angular-block-ui.min.css')}" />
        <!-- Angular related js files -->
        <apex:includeScript value="{!URLFOR($Resource.genesis__Angular, '/Angular/js/jquery.min.js')}" />
        <apex:includeScript value="{!URLFOR($Resource.genesis__Angular, '/Angular/js/bootstrap.min.js')}" />
        
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
        <script src="https://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.13.0.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/0.6.2/js/min/perfect-scrollbar.min.js"></script>
        <apex:includeScript value="{!URLFOR($Resource.genesis__Angular, '/Angular/js/angular.min.js')}" />
        <apex:includeScript value="{!URLFOR($Resource.genesis__Angular, '/Angular/js/angular-route.min.js')}" />
        <apex:includeScript value="{!URLFOR($Resource.genesis__Angular, '/Angular/js/xeditable.min.js')}" />
        <apex:includeScript value="{!URLFOR($Resource.genesis__Angular, 'Angular/js/angular-dragdrop.min.js')}" />
        <apex:includeScript value="{!URLFOR($Resource.genesis__Angular, 'Angular/js/ng-file-upload-shim.min.js')}" />
        <apex:includeScript value="{!URLFOR($Resource.genesis__Angular, 'Angular/js/ng-file-upload.min.js')}" />
        <apex:includeScript value="{!URLFOR($Resource.genesis__Angular, '/Angular/js/angular-sanitize.min.js')}" />
        <apex:includeScript value="{!URLFOR($Resource.genesis__ngForce, 'ngForce.min.js')}" />
        <apex:includeScript value="{!URLFOR($Resource.genesis__ngForce, 'ngForce-dependencies.min.js')}" />
        <apex:includeScript value="{!URLFOR($Resource.genesis__Angular, 'Angular/js/jquery.noty.packaged.min.js')}" />
        <apex:includeScript value="{!URLFOR($Resource.genesis__Angular, 'Angular/js/angular-animate.min.js')}" />
        <apex:includeScript value="{!URLFOR($Resource.genesis__Angular, 'Angular/js/angular-block-ui.min.js')}"/>
        <apex:include pageName="genesis__transactionRoom" />
        <script src="{!URLFOR($Page.ngForceConfig)}"></script>
        <apex:include pageName="genesis__transactionRoomStyles1" />
        <style>
        .always-visible.ps-container > .ps-scrollbar-x-rail,
        .always-visible.ps-container > .ps-scrollbar-y-rail {
            opacity: 0.6 !important;
        }
        </style>
    </head>

    <body ng-app="transactionRoomApp">
        <c:ngforce />
        <div class="genesis-trRoom ng-cloak">
            <div id="wrapper" ng-controller="transactionRoomPageController">
                <nav class="navbar navbar-inverse navbar-static-top" role="navigation" style="margin-bottom: 0">
                    <div class="navbar-header">
                        <a class="navbar-brand" href="#">Deal Room For {!application.Name}</a>
                    </div>
                    <div class="sidebar" role="navigation">
                        <div id="accordionGrp">
                            <accordion close-others="true">
                                <accordion-group ng-animate="collapse">
                                    <accordion-heading ng-class="panelHeading">
                                        <div class="panel panel-default">
                                        <div class="transaction-room-panel-heading panelHeading" style="padding-left : 0px;">
                                            <i class="fa fa-users fa-fw"></i>Parties
                                        </div>
                                        </div>
                                    </accordion-heading>
                                    <div>
                                        <div class="panel panel-default" style="margin-bottom:0px">
                                            <div class="right-panel-body">
                                                <apex:repeat value="{!participants}" var="p">
                                                    <a href="/_ui/core/userprofile/UserProfilePage?u={!p.user}" title="{!p.user.Name & p.role}">
                                                        <img class="chatter-photo" alt="{!p.user.Name}" src="{!p.url}" width="40" height="40"></img>
                                                        <img class="chatter-avatarStyle" alt="" src="/s.gif"></img>
                                                    </a>
                                                </apex:repeat>
                                            </div>
                                        </div>
                                    </div>
                                </accordion-group>
                                <accordion-group is-open="true" ng-animate="collapse" id="taskPnl">
                                    <accordion-heading>
                                        <div class="transaction-room-panel-heading panelHeading" style="padding-left : 0px;">
                                            <i class="fa fa-tasks fa-fw" />My Tasks
                                        </div>
                                    </accordion-heading>
                                    <div>
                                        <div class="panel panel-default">
                                            <div class="col-xs-12" style="padding-top : 5px ; padding-bottom: 5px;">
                                                <div class="pull-right">
                                                    <span> <a ng-click="setTaskFilter(1)" style="cursor:pointer;"
                                                        ng-class ="{'task-category-highlight' : model.taskStatus == 1 }" >OPEN</a> &nbsp;&nbsp; | &nbsp;&nbsp;</span>
                                                    <span> <a ng-click="setTaskFilter(2)" style="cursor:pointer;"
                                                        ng-class ="{'task-category-highlight' : model.taskStatus == 2 }" >COMPLETED</a> &nbsp;&nbsp; | &nbsp;&nbsp;</span>
                                                    <span> <a ng-click="setTaskFilter(0)" style="cursor:pointer;"
                                                        ng-class ="{'task-category-highlight' : model.taskStatus == 0 }" >ALL</a> &nbsp;&nbsp;</span>
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="table-responsive">
                                                    <table class="table table-striped table-condensed table-bordered table-hover">
                                                        <tr ng-repeat="tsk in model.myTaskList track by $index | orderBy:['Priority','Description']" 
                                                            ng-if="applyTaskFilter(tsk.Status)" ng-click="openActionDetails(tsk.WhatId)">
                                                            <td style="cursor:pointer;margin-bottom : 3px;"  ng-class="applyCompletedTaskCss(tsk.Status)"> {{tsk.Priority}} </td>
                                                            <td style="cursor:pointer;margin-bottom : 3px;" ng-class="applyCompletedTaskCss(tsk.Status)" >
                                                               <span ng-bind-html= "tsk.Subject | unsafe"></span></td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </accordion-group> 
                                <!-- Attachments accordian -->
                                <accordion-group is-open="$root.showAttachmentpanel" ng-animate="collapse" id="attachmentpanel">
                                    <accordion-heading>
                                        <div class="transaction-room-panel-heading panelHeading" style="padding-left : 0px;">
                                            <i class="fa fa-list fa-fw" />Attachments
                                        </div>
                                    </accordion-heading>
                                    <div ng-controller="AttachmentCtrl">
                                        <div class="panel panel-default">
                                            <div >
                                                <div>
                                                    <div class="col-lg-12">
                                                        <div class="table-responsive">
                                                            <table class="table table-striped table-condensed table-bordered table-hover" border="0">
                                                                <tr data-drag="true" jqyoui-draggable="{index: {{$index}}, animate: true, placeholder: 'keep'}" 
                                                                    ng-repeat="attch in attachments" ng-model="attch" 
                                                                    data-jqyoui-options="{revert: 'invalid', helper: 'clone'}" >
                                                                    <td style="padding-left : 8px;padding-right : 3px;">
                                                                        <!-- <i class="fa fa-link fa-fw" /> -->
                                                                        <a ng-href="/servlet/servlet.FileDownload?file={{attch.Id}}" target="_blank">
                                                                            <i ng-class="getFileIcon(attch.Name)"></i></a>
                 
                                                                    </td>
                                                                    <td style="cursor:pointer">{{attch.Name}} </td>
                                                                </tr>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </accordion-group>
                                <!-- Attachments accordian ends -->
                            </accordion>
                        </div>
                        <!-- /.sidebar-collapse -->
                    </div>
                    <!-- /.navbar-static-side -->
                </nav>
                <div id="page-wrapper" style="padding-top:20px;">
                    <!-- /.row -->
                    <div class="row panelreport" style="margin-top:0px; margin-bottom:20px;">
                        <div class="col-lg-3 col-md-6 clgpadding">
                            <div class="panel">
                                <div class="panel-heading doc-status-tab">
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <i class="fa fa-bell fa-4x" style="margin-top:7px;color:#FAE057!important;"></i>
                                        </div>
                                        <div class="col-xs-9 text-left">
                                            <div class="number">{{model.docStats.OPEN + '/' + model.docStats.TOTAL}}</div>
                                            <div class="bold"> OPEN </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 clgpadding">
                            <div class="panel">
                                <div class="panel-heading doc-status-tab">
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <!--  <i class="fa fa-check-square-o fa-4x"></i> -->
                                            <i class="fa fa-check-square-o fa-4x" style="margin-top:7px; color:#3A74C5 !important;"></i>
                                        </div>
                                        <div class="col-xs-9 text-left">
                                            <div class="number ">{{model.docStats.SUBMITTED + '/' + model.docStats.TOTAL}}</div>
                                            <div class="bold"> SUBMITTED </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 clgpadding">
                            <div class="panel">
                                <div class="panel-heading doc-status-tab">
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <i class="fa fa-thumbs-up fa-4x" style="margin-top:7px; color:#1EB442!important;"></i>
                                        </div>
                                        <div class="col-xs-9 text-left">
                                            <div class="number ">{{model.docStats.CLEARED + '/' + model.docStats.TOTAL}}</div>
                                            <div class="bold"> CLEARED </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 clgpadding">
                            <div class="panel">
                                <div class="panel-heading doc-status-tab">
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <i class="fa fa-thumbs-down fa-4x" style="margin-top:7px;color:#E23F3F!important;"></i>
                                        </div>
                                        <div class="col-xs-9 text-left">
                                            <div class="number">{{model.docStats.REJECTED + '/' + model.docStats.TOTAL}}</div>
                                            <div class="bold"> REJECTED </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- /.row -->
                    <div class="row panelapplayer">
                        <div class="col-lg-5">
                            <div class="panel panel-default" style="margin-left :0px; height: 37px">
                                <div class="transaction-room-panel-heading panel-heading">
                                    <i class="fa fa-list fa-fw"></i> <span>Document Category</span>
                                    <span class="pull-right" ng-show="$root.isInternal"><i class="fa fa-plus-circle" ng-click="addNewCategoryFn()"
                                        style="padding-right:5px; cursor:pointer"></i>Add New</span>
                                </div>
                                <!-- /.panel-heading -->
                                <div class="doc-category-panel-body">
                                    <div class="row">
                                        <!-- for scroll, add below style="height : 700px; overflow : scroll-y;" -->
                                        <div  class="col-md-10">
                                            <div data-angular-treeview="true" data-tree-model="model.docList" 
                                                 data-node-id="self.Id" data-node-label="self.Name" 
                                                 data-node-children="children" data-attachment="appDocAtchList">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- /.panel-body -->
                            </div>
                            <!-- /.panel -->
                        </div>
                        <!-- /.col-lg-5 -->
                        
                        <!-- New Content -->
                        <div class="col-lg-7" id="tr-room-tab-view">
                        <tabset>
                        <tab style="margin-left : 0px !important;" >
                            <tab-heading>
                                <div class="transaction-room-tab-heading" style="margin-left : 0px;">
                                    <i class="fa fa-bars fa-fw" /> Content
                                </div>
                             </tab-heading>
                            <div class="divlgspace">
                            <!-- Attachment details -->
                            <div ng-show = "model.doc.attachmentData && !(model.doc.data && model.doc.data.self.Name !== 'Root')">
                                 <div class="row">
                                    <div class="col-lg-12" style="padding-bottom : 6px!important;" >
                                        <div>
                                        <span ng-repeat="bcr in model.doc.attachmentBreadcrumb track by $index">
                                            <a >{{bcr.name}}</a>&nbsp;>>&nbsp;
                                        </span>
                                        </div>
                                    </div>
                                </div> 
                                 
                                <div class="row">
                                    <div class="col-lg-6">
                                        <div>
                                            <h4> <span ng-bind-html="model.doc.attachmentData.Name | unsafe" /> Details </h4>
                                        </div>
                                        <br/>
                                    </div>
                                    
                                    <div class="col-lg-6">
                                        <div class="text-right btncustomer">
                                            <a ng-href="/servlet/servlet.FileDownload?file={{model.doc.attachmentData.Id}}" target="_blank">
                                            <button type="button" class="btn btn-primary btn-xs" style = "width : 68px;"> 
                                            <i ng-class="getFileIcon(model.doc.attachmentData.Name)"></i> View </button></a>
                                        </div>
                                        <br/>
                                    </div>
                                    
                                </div>
                                <div class="row">
                                    <div class="col-lg-6">
                                        <div>
                                            <form>
                                                <div class="form-group">
                                                    <label for="atchUploadedBy">Uploaded By</label>
                                                    <p class="form-control-static">{{model.doc.attachmentData.CreatedBy.Name}}</p>
                                                </div>
                                                <div class="form-group">
                                                    <label for="atchUploadedDate">Uploaded Date</label>
                                                    <p class="form-control-static">{{model.doc.attachmentData.CreatedDate | date: 'MMM dd, yyyy' }}</p>
                                                </div>
                                                <div class="form-group">
                                                    <label for="atchSize">Size</label>
                                                    <p class="form-control-static">{{model.doc.attachmentData.BodyLength/(1024) | number:2}} KB </p>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div>
                                            <div class="form-group">
                                                <label for="atchLMBy">Last Modified By</label>
                                                <p class="form-control-static">{{model.doc.attachmentData.LastModifiedBy.Name}}</p>
                                            </div>
                                            <div class="form-group">
                                                <label for="atchLMBDate">Last Modified Date</label>
                                                <p class="form-control-static">{{model.doc.attachmentData.LastModifiedDate | date: 'MMM dd, yyyy' }}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Attachment details ends here -->
                            
                            <!-- ADC details --> 
                            <div ng-show="model.doc.data && model.doc.data.self.Name !== 'Root' && !model.doc.attachmentData"
                                ng-model="model.newAttachment" jqyoui-droppable="{onDrop: 'addNewAttachment()'}" data-drop="true">
                                <div class="row">
                                    <div class="col-lg-12" style="padding-bottom : 6px!important;" >
                                        <div>
                                        <span ng-repeat="bcr in model.doc.data.breadCrumb track by $index">
                                            <a >{{bcr.name}}</a>&nbsp;>>&nbsp;
                                        </span>
                                        </div>
                                    </div>
                                 </div>   
                                 
                                  <div class="row"> 
                                     <div class="col-lg-12" style="padding-top : 0px!important;" >
                                         <div class="text-right btncustomer">  
                                            <button type="button" class="btn btn-primary btn-xs" style = "width : 68px;"
                                                ng-show="!model.doc.data.edit && $root.isInternal" 
                                                ng-click="editDocumentDetails()"> <i class="fa fa-unlock" /> Edit</button>
                                            <button type="button" class="btn btn-success btn-xs" style = "width : 68px;"
                                                ng-show="!model.doc.data.edit && !$root.isInternal" 
                                                ng-click="saveDocumentDetails()"> <i class="fa fa-check-circle" /> Submit</button>
                                            <button type="button" class="btn btn-warning btn-xs" style = "width : 68px;"
                                                ng-show="!model.doc.data.edit" ng-click="notify()"><i class="fa fa-envelope-o"/> Notify</button>
                                            <button type="button" class="btn btn-success btn-xs" style = "width : 68px;"
                                                ng-show="model.doc.data.edit && $root.isInternal" 
                                                ng-click="saveDocumentDetails()"><i class="fa fa-lock" /> Save</button>
                                            <button type="button" class="btn btn-danger btn-xs" style = "width : 68px;" ng-click="cancelEditDocumentDetails()"
                                                ng-show="model.doc.data.edit" > <i class="fa fa-undo" /> Cancel</button>
                                            <button type="button" class="btn btn-info btn-xs" style = "width : 68px;"
                                                ng-click="openAttachmentList()"> <i class="fa fa-paperclip" /> Attach </button>
                                            <button type="button" class="btn btn-default btn-xs" style = "width : 77px;color: white !important;background-color: #D2691E !important;"
                                                ng-show="model.doc.data && model.doc.data.self && model.doc.data.self.genesis__Document_Category__r.genesis__Child_Object_API_Name__c && $root.isInternal" 
                                                ng-click="showSummaryDetails()"> <i class="fa fa-th-large fa-1" /> Summary
                                                <apex:include pageName="genesis__ADCSummaryTemplate" />
                                            </button>
                                        </div>  
                                     </div>
                                 </div>
                                     
                                 <div class="row"> 
                                     <div class="col-lg-12" style="padding-top : 5px!important;">
                                         <div>
                                            <h4><span ng-bind-html= "model.doc.data.self.Name | unsafe" /> Details </h4>
                                        </div>
                                        <br/>
                                     </div>     
                                 </div>
                                 
                                 <div class="row"> 
                                     <div class="col-lg-12" style="padding-top : 5px!important;">
                                         <div class="form-group" style="margin-bottom: 0px;">
                                             <label for="exampleInputEmail1">Description</label>
                                             <p class="form-control-static" ng-if="!model.doc.data.edit" 
                                                 ng-bind-html="model.doc.data.self.genesis__Description__c | unsafe"></p>                
                                             <p class="form-control-static" ng-if="model.doc.data.edit">
                                             <textarea style="display:inline; width:100%;" ng-model="model.doc.data.self.genesis__Description__c" 
                                                 placeholder="Enter Description" class="form-control" >
                                             </textarea >
                                             </p>
                                         </div>
                                     </div>     
                                 </div>
                                                                  
                                 <div class="row" id="detailContent">
                                    <div class="col-lg-6">
                                     <!--   <div class="pspace">
                                            <h4>{{model.doc.data.self.Name}} Details </h4>
                                        </div>
                                        <br/> -->
                                        <div>
                                            <form>
                                            <!--    <div class="form-group">
                                                    <label for="exampleInputEmail1">Required </label>
                                                    <p class="form-control-static" ng-if="!model.doc.data.edit">
                                                        <span ng-show="model.doc.data.self.genesis__Required__c"> YES </span>
                                                        <span ng-show="!model.doc.data.self.genesis__Required__c"> NO </span>
                                                    </p>
                                                    <p class="form-control-static" ng-if="model.doc.data.edit">
                                                        <input type="checkbox" placeholder="{{model.doc.data.self.genesis__Required__c}}" ng-model="model.doc.data.self.genesis__Required__c"> </input>
                                                    </p>
                                                </div>
                                                <div class="form-group">
                                                    <label for="exampleInputEmail1">Status</label>
                                                    <p class="form-control-static" ng-if="!model.doc.data.edit"> {{model.doc.data.self.genesis__Status__c}} </p>
                                                    <p class="form-control-static" ng-if="model.doc.data.edit">
                                                        <select ng-model="model.doc.data.self.genesis__Status__c" style="display:inline; width:100%;"
                                                                ng-options="pk.value as pk.label for pk in adcStatusOptns | filter:{label:$viewValue} | limitTo:5"></select>
                                                    </p>
                                                </div>    
                                                <div class="form-group">
                                                    <label for="exampleInputEmail1">Priority</label>
                                                    <p class="form-control-static" ng-if="!model.doc.data.edit">{{model.doc.data.self.genesis__Priority__c}} </p>
                                                    <p class="form-control-static" ng-if="model.doc.data.edit">
                                                        <select ng-model="model.doc.data.self.genesis__Priority__c"  style="display:inline; width:100%;" placeholder="Select Priority"
                                                                    ng-options="pk.value as pk.label for pk in adcPriorityOptns | filter:{label:$viewValue} | limitTo:5"></select>    
                                                    </p>
                                                </div>   -->  
                                                <div class="form-group">
                                                    <label for="exampleInputEmail1">Responsible Party </label>
                                                    <p class="form-control-static" ng-if="!model.doc.data.edit">
                                                        {{model.doc.data.self.genesis__Party__r.genesis__Party_Name__c}} </p>
                                                    <p class="form-control-static" ng-if="model.doc.data.edit">
                                                       <input type="text" style="display:inline; width:100%;" ng-model="model.doc.data.self.genesis__Party__r" 
                                                        id="usrparty" placeholder="Party Name" class="form-control"
                                                        typeahead="pty as pty.genesis__Party_Name__c + ' (' + pty.clcommon__Type__r.Name + ')' for pty in appPartyList | 
                                                            filter:$viewValue | limitTo:5">
                                                        </input>
                                                    </p>
                                                </div> 
                                                <div class="form-group">
                                                    <label for="exampleInputEmail1">Review Assigned To </label>
                                                    <p class="form-control-static" ng-if="!model.doc.data.edit">
                                                        {{model.doc.data.self.genesis__Review_Assigned_To__r.Name}} </p>
                                                    <p class="form-control-static" ng-if="model.doc.data.edit">
                                                        <input type="text" style="display:inline; width:100%;" ng-model="model.doc.data.self.genesis__Review_Assigned_To__r" 
                                                        placeholder="Select User" class="form-control" typeahead="usr as usr.Name for usr in sfUserList | filter:{Name:$viewValue} | limitTo:5">
                                                        </input>
                                                    </p>
                                                </div>   
                                                <div class="form-group">
                                                    <label for="exampleInputEmail1">Reviewed By </label>
                                                    <p class="form-control-static" ng-if="!model.doc.data.edit"> {{model.doc.data.self.genesis__Reviewed_By__r.Name}} </p>
                                                    <p class="form-control-static" ng-if="model.doc.data.edit">
                                                        <input type="text" style="display:inline; width:100%;" ng-model="model.doc.data.self.genesis__Reviewed_By__r" 
                                                        placeholder="Select User" class="form-control" typeahead="usr as usr.Name for usr in sfUserList | filter:{Name:$viewValue} | limitTo:5">
                                                        </input>
                                                    </p>
                                                </div>                                                                                    
                                            </form>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div>
                                        
                                            <div class="form-group">
                                                <label for="exampleInputEmail1">Required </label>
                                                <p class="form-control-static" ng-if="!model.doc.data.edit">
                                                    <span ng-show="model.doc.data.self.genesis__Required__c"> Yes </span>
                                                    <span ng-show="!model.doc.data.self.genesis__Required__c"> No </span>
                                                </p>                
                                                   <!-- 
                                                   <p class="form-control-static" ng-if="model.doc.data.edit">
                                                   <input type="checkbox" placeholder="{{model.doc.data.self.genesis__Required__c}}" 
                                                       ng-model="model.doc.data.self.genesis__Required__c"> </input> 
                                                   </p>
                                                   -->
                                                    <div>
                                                    <div class="btn-group" ng-if="model.doc.data.edit">
                                                        <label class="btn btn-default" ng-model="model.doc.data.self.genesis__Required__c" btn-radio="true">Yes</label>
                                                        <label class="btn btn-default" ng-model="model.doc.data.self.genesis__Required__c" btn-radio="false">No</label>
                                                    </div>     
                                                    </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="exampleInputEmail1">Status</label>
                                                <p class="form-control-static" ng-if="!model.doc.data.edit"> {{model.doc.data.self.genesis__Status__c}} </p>
                                                <p class="form-control-static" ng-if="model.doc.data.edit">
                                                  <!--  <input type="text" style="display:inline; width:100%;" ng-model="model.doc.data.self.genesis__Status__c" 
                                                    placeholder="Select Status" class="form-control" typeahead="pk.value as pk.label for pk in adcStatusOptns | filter:{label:$viewValue} | limitTo:5">
                                                    </input> -->
                                                    <select ng-model="model.doc.data.self.genesis__Status__c" class="dropdownOptions"
                                                            ng-options="pk.value as pk.label for pk in adcStatusOptns | filter:{label:$viewValue} | limitTo:5"></select>
                                                </p>
                                            </div>    
                                            <div class="form-group">
                                                <label for="exampleInputEmail1">Priority</label>
                                                <p class="form-control-static" ng-if="!model.doc.data.edit">{{model.doc.data.self.genesis__Priority__c}} </p>
                                                <p class="form-control-static" ng-if="model.doc.data.edit">
                                                  <!--  <input type="text" style="display:inline; width:100%;" ng-model="model.doc.data.self.genesis__Priority__c" 
                                                        placeholder="Select Priority" class="form-control" 
                                                        typeahead="pk.value as pk.label for pk in adcPriorityOptns | filter:{label:$viewValue} | limitTo:5">
                                                    </input> -->
                                                    <select ng-model="model.doc.data.self.genesis__Priority__c"  style="display:inline; width:100%;" placeholder="Select Priority"
                                                         class="dropdownOptions" ng-options="pk.value as pk.label for pk in adcPriorityOptns | filter:{label:$viewValue} | limitTo:5"></select>    
                                                </p>
                                            </div> 
                                        
                                            <!--
                                            <div class="form-group">
                                                <label for="exampleInputEmail1">Responsible Party </label>
                                                <p class="form-control-static" ng-if="!model.doc.data.edit">
                                                    {{model.doc.data.self.genesis__Party__r.genesis__Party_Name__c}} </p>
                                                <p class="form-control-static" ng-if="model.doc.data.edit">
                                                   <input type="text" style="display:inline; width:100%;" ng-model="model.doc.data.self.genesis__Party__r" 
                                                    id="usrparty" placeholder="Party Name" class="form-control"
                                                    typeahead="pty as pty.genesis__Party_Name__c + ' (' + pty.clcommon__Type__r.Name + ')' for pty in appPartyList | 
                                                        filter:$viewValue | limitTo:5">
                                                    </input>
                                                </p>
                                            </div> 
                                            <div class="form-group">
                                                <label for="exampleInputEmail1">Review Assigned To </label>
                                                <p class="form-control-static" ng-if="!model.doc.data.edit">
                                                    {{model.doc.data.self.genesis__Review_Assigned_To__r.Name}} </p>
                                                <p class="form-control-static" ng-if="model.doc.data.edit">
                                                    <input type="text" style="display:inline; width:100%;" ng-model="model.doc.data.self.genesis__Review_Assigned_To__r" 
                                                    placeholder="Select User" class="form-control" typeahead="usr as usr.Name for usr in sfUserList | filter:{Name:$viewValue} | limitTo:5">
                                                    </input>
                                                </p>
                                            </div>   
                                            <div class="form-group">
                                                <label for="exampleInputEmail1">Reviewed By </label>
                                                <p class="form-control-static" ng-if="!model.doc.data.edit"> {{model.doc.data.self.genesis__Reviewed_By__r.Name}} </p>
                                                <p class="form-control-static" ng-if="model.doc.data.edit">
                                                    <input type="text" style="display:inline; width:100%;" ng-model="model.doc.data.self.genesis__Reviewed_By__r" 
                                                    placeholder="Select User" class="form-control" typeahead="usr as usr.Name for usr in sfUserList | filter:{Name:$viewValue} | limitTo:5">
                                                    </input>
                                                </p>
                                            </div>
                                            -->
                                        </div>
                                    </div>
                                </div>     
                                <div class="row"> 
                                     <div class="col-lg-12" style="padding-top : 5px!important;">
                                         <div class="form-group" style="margin-bottom: 0px;">
                                             <label for="exampleInputEmail1">Review Comments</label>
                                             <p class="form-control-static" ng-if="!model.doc.data.edit" >{{model.doc.data.self.genesis__Review_Comments__c}} </p>
                                             <p class="form-control-static" ng-if="model.doc.data.edit">
                                             <textarea style="display:inline; width:100%;" ng-model="model.doc.data.self.genesis__Review_Comments__c" 
                                                 placeholder="Enter Description" class="form-control" >
                                             </textarea >
                                             </p>
                                         </div>
                                     </div>     
                                 </div>
                                 
                                <div class="row" ng-show="model.doc.data.appDocAtchList">
                                    <div class="col-lg-12">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-condensed table-bordered table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>Name</th>
                                                        <th>Size</th>
                                                        <th>Uploaded By</th>
                                                        <th>Uploaded Date</th>
                                                        <th> Action </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr></tr>
                                                    <!-- ngRepeat: atch in model.doc.data.appDocAtchList -->
                                                    <tr ng-repeat="atch in model.doc.data.appDocAtchList track by $index">
                                                        <td>{{atch.Name}}</td>
                                                        <td>{{atch.BodyLength/(1024) | number:2}} KB </td>
                                                        <td>{{atch.CreatedBy.Name}}</td>
                                                        <td>{{atch.CreatedDate | date: 'MMM dd, yyyy' }}</td>
                                                        <td>
                                                            <div>
                                                                <a ng-href="/servlet/servlet.FileDownload?file={{atch.Id}}" target="_blank">
                                                                    <i class="fa fa-eye fa-fw" title="View File" style="cursor : pointer;" /></a>
                                                                <a ng-href="" ng-click="deleteAttachment(atch)">
                                                                    <i class="fa fa-trash fa-fw" title="Remove File" style="cursor : pointer;" /></a>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <!-- end ngRepeat: atch in model.doc.data.appDocAtchList -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                
                                <!--Attachment Panel -->
                                <div class="row">
                                    <div class="col-lg-12" >
                                        <div class="dragupload" ngf-drop="onFileSelect($files,$event)" ngf-drag-over-class="dragover" multiple="multiple">
                                            <div class="upload">
                                                 <div class="col-sm-6" style="padding:2px">
                                                     <div id="dropzone">                   
                                                         <span id="dropzone_txt1"> Drop files here </span>
                                                    </div>
                                                 </div>
                                                 <div class="col-sm-6" style="padding:2px">
                                                     <div>
                                                        <span> 
                                                            <input placeholder="Import Files" type="text" 
                                                                    class="form-control input-sm" 
                                                                    ng-model="myFileName" style="font-size: 12px;" 
                                                                    ng-disabled="files.length === 0" >
                                                            </input>
                                                        </span>
                                                    </div>
                                                    <div class="input-group" style="border-radius: 6px;margin-top:8px">
                                                        <div class="input-group-btn">
                                                            <span style="padding:2px;">
                                                                <br/>
                                                                <button class="btn btn-primary btn-xs" type="file" 
                                                                   ngf-select = "onFileSelect($files,$event)" 
                                                                   multiple="multiple" style="font-size: 12px; min-width: 62px;">
                                                                   <i class="fa fa-folder-open fa-fw" style="padding:1px;"/>Browse</button>
                                                            </span>
                                                            <span style="padding:2px;">
                                                                <button class="btn btn-primary btn-xs" ng-disabled="!files || files.length === 0" 
                                                                   ng-click="clearSelection()"
                                                                   style="font-size: 12px; min-width: 62px;">
                                                                   <i class="fa fa-trash fa-fw"  style="padding:1px;"/> Clear </button> 
                                                            </span>
                                                            <span style="padding:2px;"> 
                                                                <button class="btn btn-primary btn-xs" 
                                                                   ng-click="importFiles()" ng-disabled="!files || files.length === 0" 
                                                                   style="font-size: 12px; min-width: 62px; ">
                                                                   <i class="fa fa-cloud-upload fa-fw" style="padding:1px;"/> Upload </button>
                                                            </span>
                                                        </div>
                                                    </div>
                                                 </div>
                                             </div>
                                         </div>
                                    </div>
                                    <!-- /.col-lg-12 -->
                                </div>
                                <!-- /.row -->
                                <!-- Attachment panel ends here -->
                                
                            </div>
                             <!-- ADC details ends here -->   
                            </div>
                            </tab>
                            <tab id="chatter-content" style="margin-left : 0px !important;">
                            <tab-heading>
                                <div class="transaction-room-tab-heading" style="padding-left : 0px;">
                                    <i class="fa fa-comments fa-fw" /> Chatter
                                </div>
                             </tab-heading>
                             <div id="chatterPnl" class="always-visible" style="position:relative; height: 800px; overflow-x:hidden">
                                <div class="panel panel-default">
                                    <div class="panel-body trchatterPanel">
                                        <chatter:feed entityId="{!application.Id}" />
                                    </div>
                                </div>
                            </div>
                         </tab>
                          </tabset>
                        </div>
                        <!-- New Content ends -->
                        
                    </div>
                    <!-- /.row -->
                </div>
                <!-- /#page-wrapper -->
            </div>
            <!-- #wrapper -->
            <script type="text/ng-template" id="newAppDocModalContent.html">
                <div class="genesis-trRoom ng-cloak">
                    <div class="panel panel-default" style="margin-bottom:0px">
                        <div class="transaction-room-panel-heading panel-heading panelHeading">
                            <span> New Application Document Category </span>
                            <span class="pull-right"><i class="fa fa fa-times-circle close-icon" ng-click="cancel()"></i></span>
                        </div>
                        <div class="app-modal-body ng-cloak">
                            <div style="margin:10px;"> <strong>Creating document category under {{doc.self.Name}}</strong></div>
                            <span style="margin:10px">Enter Name : </span>
                            <input type="text" style="display:inline; width:90%;" 
                                ng-model="customSelected" placeholder="Select Document Category" 
                                class="form-control ng-cloak" ng-hide = " doc.self.Name.toUpperCase() !== 'ROOT'" 
                                typeahead="adc as adc.genesis__Category_Name__c for adc in dcList | filter:{genesis__Category_Name__c:$viewValue} | limitTo:5">
                            </input>
                             <input style="width: 250px; display:inline" type="text" class="form-control ng-cloak" 
                            ng-model="customSelected" placeholder="New Folder" 
                            ng-hide="doc.self.Name.toUpperCase() === 'ROOT'"></input>
                            <button class="btn btn-primary btn-xs" ng-click="ok()" style="width : 68px;">OK</button>
                        </div>
                    </div>
                </div>
            </script>    
        </div>
        
      <script type="text/ng-template" id="dealRoomConfirmation.html">
        <div class="modal-body">
            <b>{{message}}<b>
        </div>
        <div class="modal-footer genesis-trRoom">
            <button class="btn btn-success btn-xs" style="width: 68px;" type="button" ng-click="ok()">Yes</button>
            <button class="btn btn-danger btn-xs" style="width: 68px;" type="button" ng-click="cancel()">No</button>
        </div>
    </script>
      
    </body>
    </html>
</apex:page>